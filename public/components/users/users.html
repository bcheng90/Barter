<div id="user-container">
  <div id="user-aboutme">
    <h4 class="center bold underline">{{users.user.username}} </h4>
    <p>Rating: {{users.user.score}}</p>
    <!-- Rate User -->
    <div id="rating-form">
      <form ng-show="app.current_user.id !== users.user.id && !users.hasRating(users.user, app.current_user) && users.hasAcceptedOffer(users.user, app.current_user)">
        Rating:
        <select ng-model="users.user.reputation.rating">
          <option ng-repeat="rating in users.ratings" value="{{rating}}">{{rating}}</option>
        </select>
        <button type="submit" ng-click="users.saveRating()" class="btn btn-primary">Rate</button>
      </form>
    </div>

    <ul>
      <p><span class="bold">Email:</span> {{users.user.email}}</p>
      <p><span class="bold">Interests:</span> {{users.user.interests}}</p>
      <p><span class="bold">Location:</span> {{users.user.location}}</p>
      <p><span class="bold">About Me:</span> {{users.user.about}}</p>
    </ul>
    <button type="button" class="btn btn-default btn-sm" data-toggle="modal" data-target="#userEdit" ng-show="app.current_user.id === users.user.id">
      Edit Account Information
    </button>
    <div id="userEdit" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">{{users.user.username}}</h4>
          </div>
          <div class="modal-body">
            <form>
              Email: <input type="text" name="email" ng-model="users.user.email">
              Interests: <input type="text" name="interests" ng-model="users.user.interests">
              Location: <input type="text" name="location" ng-model="users.user.location">
              About Me: <input type="text" name="about" ng-model="users.user.about">
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="submit" data-dismiss="modal" ng-click="users.saveUser(users.user)" class="btn btn-primary" ng-hide="userEdit">Save changes</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
  </div>

  <div id="user-talents">
    <!-- TODO: Add partial template of user talents for future horizontal scroll -->
    <ul>
      <li ng-repeat="talent in users.user.talents">
        <a ng-click="users.toggleTalentShown(talent)">{{talent.title}}</a>
        <div ng-class="talent.isShown ? 'visible' : 'hidden'">
          <p>Category: {{users.convertType(talent.type)}}</p>
          <p>Experience: {{talent.experience}}</p>
          <p>Description: {{talent.description}}</p>
          <p>Sample: {{talent.sample}}</p>
          <!-- Delete button for Talent -->
          <button type="button" class="btn btn-default btn-xs" data-toggle="modal" data-target="#delTalent{{talent.id}}" ng-show="app.current_user.id === users.user.id">
            Delete Talent
          </button>
          <div id="delTalent{{talent.id}}" class="modal">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title">Delete {{talent.title}}</h4>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                  <button type="submit" data-dismiss="modal" ng-click="users.deleteTalent(talent)" class="btn btn-primary" ng-hide="talentEdit">Confirm Delete</button>
                </div>
              </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
          </div><!-- /.modal -->

          <!-- Edit Button for Talent -->
          <button type="button" class="btn btn-default btn-xs" data-toggle="modal" data-target="#editTalent{{talent.id}}" ng-show="app.current_user.id === users.user.id">
            Edit Talent
          </button>
          <div id="editTalent{{talent.id}}" class="modal">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                  <h4 class="modal-title">Edit {{talent.title}}</h4>
                </div>
                <div class="modal-body">
                  <form>
                    Title: <input type="text" name="title" ng-model="talent.title">
                    Description: <input type="text" name="description" ng-model="talent.description">
                    Type:<br>
                    <select ng-model="users.talent.type">
                      <option ng-repeat="category in users.categories" value="{{category}}">{{category}}</option>
                    </select><br>
                    Experience:<br>
                    <select name="experience" ng-model="users.talent.experience">
                      <option ng-repeat="experience in users.experiences" value="{{experience}}">{{experience}}</option>
                    </select><br>
                    Sample: <input type="text" name="sample" ng-model="talent.sample">
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                  <button type="submit" data-dismiss="modal" ng-click="users.updateTalent(talent)" class="btn btn-primary" ng-hide="talentEdit">Save changes</button>
                </div>
              </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
          </div><!-- /.modal -->
        </div>
      </li>
    </ul>
  </div>

<!-- Creating new talent -->
  <button type="button" class="btn btn-default btn-sm" data-toggle="modal" data-target="#userNewTalent" ng-show="app.current_user.id === users.user.id">
    Add a talent
  </button>
  <div id="userNewTalent" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title">New Talent</h4>
        </div>
        <div class="modal-body">
            <form >
              Title: <input type="text" name="title" ng-model="users.talent.title">
              Sample: <input type="text" name="sample" ng-model="users.talent.sample">
              Description: <input type="text" name="description" ng-model="users.talent.description">
              Type:
              <select ng-model="users.talent.type">
                <option ng-repeat="category in users.categories" value="{{category}}">{{category}}</option>
              </select>
              Experience:
              <select name="experience" ng-model="users.talent.experience">
                <option ng-repeat="experience in users.experiences" value="{{experience}}">{{experience}}</option>
              </select>
            </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="submit" data-dismiss="modal" ng-click="users.saveTalent()" class="btn btn-primary" ng-hide="userNewTalent">Create Talent</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

<!-- TODO: Add partial template of timeslots here -->
  <div id="user-timeslots" >
    <div class="day-block" ng-repeat="day in users.day_array">
    <div>
      <h2>{{day.name}}</h2>
      <div class="day" id="day.name" ng-repeat="timeslot in users.user.timeslots | filter:{weekday: day.id} | orderBy :'time'">
        {{timeslot.hours}}
        <p>timeslot id: {{timeslot.id}}</p>
        <button class="btn btn-default" ng-show="timeslot.offers.length && tab !== day.id && !users.isClosed(timeslot)" ng-click="tab = day.id">{{timeslot.offers.length}} offer(s)</button>
        <button class="btn btn-success" ng-show="timeslot.offers.length && tab !== day.id  && users.isClosed(timeslot)" ng-click="tab = day.id">Accepted offer</button>
        <div id="timeslot-offers" ng-show="tab === day.id">
          <ul ng-repeat="offer in timeslot.offers">
            <li><button class="btn btn-default" ng-click="tab = (day.id * 11)" ng-show="tab !== (day.id * 11)">See offer {{offer.id}} </button>
              <div class="talnt" ng-show = "tab === (day.id * 11) ">
                 <h4>status: {{offer.status}}</h4>
                 <h3>{{offer.student.username}}</h3>
                 <h3>{{offer.student.username}}'s talents:</h3>
                 <div ng-repeat="talent in offer.student_talents">
                   <p>{{talent.title}}</p>
                 </div>
                 <button ng-click="users.acceptOffer(offer);tab=(day.id * 10 + 9)" class="btn btn-default" ng-show="app.current_user.id === users.user.id && !users.isClosed(timeslot)">accept</button>
                 <button ng-click="users.declineOffer(offer);tab = 0" class="btn btn-default" ng-show="app.current_user.id === users.user.id && !users.isClosed(timeslot)">decline</button>
                 <button ng-click="users.declineOffer(offer);tab = 0" class="btn btn-default" ng-show="app.current_user.id === users.user.id && users.isClosed(timeslot)">cancel</button>
                 <button class="btn btn-default" ng-click="tab= day.id">close</button>
               </div>
             </li>
          </ul>
          <button class="btn btn-default" ng-click="tab = 0" ng-show="timeslot.offers.length && tab !== (day.id * 10 + 9)">close</button>
        </div>
        <button class="btn btn-default" ng-click="users.createOffer(timeslot);tab = (day.id * 11)" ng-show="app.current_user.id !== users.user.id && !users.isClosed(timeslot) && !users.hasOffer(timeslot, app.current_user.id)">create offer</button><br>
        <button ng-show="app.current_user.id === users.user.id" ng-click="users.deleteTimeslot(timeslot)">delete timeslot</button>
      </div>
    </div>
  </div>
  </div>
</div>
<div id="new-ts"ng-show="tab===8">
  <form>
    day of the week:
    <select ng-model="users.user.timeslot.day">
      <option ng-repeat="day in users.days" name="day" value="{{day}}">{{day}}</option>
    </select><br>
    choose hour:
    <select ng-model="users.user.timeslot.hour">
      <option ng-repeat="hour in users.hours" name="hour" value="{{hour}}">{{hour}}</option>
    </select>
    <br>
    <button class="btn btn-default" type="submit" ng-click="tab=0;users.creeTimeslot()" class="btn btn-primary">Submit</button>
  </form>
</div>
<button ng-show="app.current_user.id === users.user.id" class="btn btn-default mrgn" ng-click ="tab=8">Create new timeslot</button>


  <!-- <week-day info="monday"></week-day>
  <week-day info="tuesday"></week-day>
  <week-day info="wednesday"></week-day>
  <week-day info="thursday"></week-day>
  <week-day info="friday"></week-day>
  <week-day info="saturday"></week-day>
  <week-day info="sunday"></week-day> -->


